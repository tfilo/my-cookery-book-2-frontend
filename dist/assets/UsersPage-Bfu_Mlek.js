import{r as n,u as U,a as x,f as j,j as e,B as o,g as w,S as k,F as u,b as C,c as P,M as f,d as S}from"./index-Djf207zA.js";import{T as z}from"./Table-J9FyKPWQ.js";const L=()=>{const[g,d]=n.useState([]),[c,l]=n.useState(),[p,i]=n.useState(!1),[r,m]=n.useState(),h=U();n.useEffect(()=>{const s=new AbortController;return(async()=>{try{i(!0);const a=await x.getUsers({signal:s.signal});d(a)}catch(a){j(a).then(t=>l(t))}finally{i(!1)}})(),()=>s.abort()},[]);const v=()=>{h("/user")},y=s=>{h(`/user/${s}`)},N=s=>{m(s)},b=s=>{(async()=>{if(s===!0)if(r)try{i(!0),await x.deleteUser(r.id),d(a=>a.filter(t=>t.id!==r.id))}catch(a){j(a).then(t=>{l(t)})}finally{i(!1)}else l("Neplatné používateľské ID!");m(void 0)})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row",children:[e.jsx("h1",{className:"flex-grow-1",children:"Používatelia"}),e.jsx(o,{variant:"primary",onClick:v,children:"Pridať používateľa"})]}),e.jsxs(z,{striped:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Používateľské meno"}),e.jsx("th",{children:"Meno"}),e.jsx("th",{children:"Priezvisko"}),e.jsx("th",{children:"Rola"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:g.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:s.username}),e.jsx("td",{className:"align-middle",children:s.firstName}),e.jsx("td",{className:"align-middle",children:s.lastName}),e.jsx("td",{className:"align-middle",children:s.roles.map(a=>w[a]).join(", ")}),e.jsx("td",{className:"align-middle ",children:e.jsxs(k,{direction:"horizontal",gap:2,className:"justify-content-end",children:[e.jsx(o,{title:"Upraviť","aria-label":"Upraviť",variant:"outline-secondary",onClick:y.bind(null,s.id),className:"border-0",children:e.jsx(u,{icon:C})}),e.jsx(o,{title:"Vymazať","aria-label":"Vymazať",variant:"outline-danger",onClick:N.bind(null,s),className:"border-0",children:e.jsx(u,{icon:P})})]})})]},s.id))})]}),e.jsx(f,{show:!!r,type:"question",message:`Prajete si vymazať používateľa "${r==null?void 0:r.username}" ?`,onClose:b}),e.jsx(f,{show:!!c,message:c,type:"error",onClose:()=>{l(void 0)}}),e.jsx(S,{show:p})]})};export{L as default};
//# sourceMappingURL=UsersPage-Bfu_Mlek.js.map
