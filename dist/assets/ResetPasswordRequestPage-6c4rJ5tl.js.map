{"version":3,"file":"ResetPasswordRequestPage-6c4rJ5tl.js","sources":["../../src/pages/signIn/ResetPasswordRequestPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Form } from 'react-bootstrap';\nimport { useForm, FormProvider } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { Api } from '../../openapi';\nimport { formatErrorMessage } from '../../utils/errorMessages';\nimport { authApi } from '../../utils/apiWrapper';\nimport Input from '../../components/ui/Input';\nimport Modal from '../../components/ui/Modal';\nimport Spinner from '../../components/ui/Spinner';\n\nconst schema = yup\n    .object({\n        email: yup.string().trim().max(320, 'Musí mať maximálne 320 znakov').required('Povinná položka')\n    })\n    .required();\n\nconst ResetPasswordRequestPage: React.FC = () => {\n    const methods = useForm<Api.ResetPasswordLinkRequest>({\n        resolver: yupResolver(schema)\n    });\n\n    const {\n        formState: { isSubmitting }\n    } = methods;\n    const [error, setError] = useState<string>();\n    const [successfulConfirmation, setSuccessfulConfirmation] = useState(false);\n\n    const submitHandler = async (data: Api.ResetPasswordLinkRequest) => {\n        try {\n            await authApi.resetPasswordLink(data);\n            setSuccessfulConfirmation(true);\n        } catch (err) {\n            formatErrorMessage(err).then((message) => setError(message));\n        }\n    };\n\n    return (\n        <div className='row justify-content-center'>\n            <div className='col-lg-6 pt-3'>\n                <h1>Zmena hesla</h1>\n                <FormProvider {...methods}>\n                    <Form\n                        onSubmit={methods.handleSubmit(submitHandler)}\n                        noValidate\n                    >\n                        <p className='text-primary'>Prosím zadajte e-mail, na ktorý Vám bude odoslané informácie pre zmenu hesla.</p>\n                        <Input\n                            name='email'\n                            label='E-mail'\n                        />\n                        <Button\n                            variant='primary'\n                            type='submit'\n                        >\n                            Potvrdiť\n                        </Button>\n                        <Spinner show={isSubmitting} />\n                    </Form>\n                </FormProvider>\n            </div>\n            <Modal\n                show={!!error}\n                message={error}\n                type='error'\n                onClose={() => {\n                    setError(undefined);\n                }}\n            />\n            <Modal\n                show={successfulConfirmation}\n                message='Na Váš e-mail bol odoslané informácie pre zmenu hesla.'\n                type='info'\n                onClose={() => {\n                    setSuccessfulConfirmation(false);\n                }}\n            />\n        </div>\n    );\n};\n\nexport default ResetPasswordRequestPage;\n"],"names":["schema","yup.object","yup.string","ResetPasswordRequestPage","methods","useForm","yupResolver","isSubmitting","error","setError","useState","successfulConfirmation","setSuccessfulConfirmation","submitHandler","data","authApi","err","formatErrorMessage","message","jsxs","jsx","FormProvider","Form","Input","Button","Spinner","Modal"],"mappings":"oIAYA,MAAMA,EAASC,EACH,CACJ,MAAOC,EAAa,EAAA,KAAO,EAAA,IAAI,IAAK,+BAA+B,EAAE,SAAS,iBAAiB,CACnG,CAAC,EACA,SAAS,EAERC,EAAqC,IAAM,CAC7C,MAAMC,EAAUC,EAAsC,CAClD,SAAUC,EAAYN,CAAM,CAAA,CAC/B,EAEK,CACF,UAAW,CAAE,aAAAO,CAAa,CAAA,EAC1BH,EACE,CAACI,EAAOC,CAAQ,EAAIC,WAAiB,EACrC,CAACC,EAAwBC,CAAyB,EAAIF,EAAAA,SAAS,EAAK,EAEpEG,EAAgB,MAAOC,GAAuC,CAC5D,GAAA,CACM,MAAAC,EAAQ,kBAAkBD,CAAI,EACpCF,EAA0B,EAAI,QACzBI,EAAK,CACVC,EAAmBD,CAAG,EAAE,KAAME,GAAYT,EAASS,CAAO,CAAC,CAAA,CAEnE,EAGI,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,6BACX,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACX,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAW,aAAA,CAAA,EACfA,EAAAA,IAACC,EAAc,CAAA,GAAGjB,EACd,SAAAe,EAAA,KAACG,EAAA,CACG,SAAUlB,EAAQ,aAAaS,CAAa,EAC5C,WAAU,GAEV,SAAA,CAACO,EAAA,IAAA,IAAA,CAAE,UAAU,eAAe,SAA6E,gFAAA,EACzGA,EAAA,IAACG,EAAA,CACG,KAAK,QACL,MAAM,QAAA,CACV,EACAH,EAAA,IAACI,EAAA,CACG,QAAQ,UACR,KAAK,SACR,SAAA,UAAA,CAED,EACAJ,EAAAA,IAACK,EAAQ,CAAA,KAAMlB,CAAc,CAAA,CAAA,CAAA,CAAA,CAErC,CAAA,CAAA,EACJ,EACAa,EAAA,IAACM,EAAA,CACG,KAAM,CAAC,CAAClB,EACR,QAASA,EACT,KAAK,QACL,QAAS,IAAM,CACXC,EAAS,MAAS,CAAA,CACtB,CACJ,EACAW,EAAA,IAACM,EAAA,CACG,KAAMf,EACN,QAAQ,yDACR,KAAK,OACL,QAAS,IAAM,CACXC,EAA0B,EAAK,CAAA,CACnC,CAAA,CACJ,EACJ,CAER"}